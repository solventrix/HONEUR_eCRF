{% load i18n %}
<div class="follow-up-table" ng-show="episode.blood_count_follow_up.length > 0">
  <div class="col-md-12">
    <div class="row header-row display-label">
      
      <div class="col-sm-1 header"></div>
      <div class="col-sm-1 header">{% trans "erythrocytes" %}</div>
      <div class="col-sm-1 header">{% trans "hemoglobin" %}</div>
      <div class="col-sm-1 header">{% trans "hematocrit" %}</div>
      <div class="col-sm-1 header">{% trans "mcv" %}<br/>(u/L)</div>
      <div class="col-sm-1 header">{% trans "mch" %}<br/>(mg/dL)</div>
      <div class="col-sm-1 header">{% trans "mchc" %}<br/>(g/dL)</div>
      <div class="col-sm-1 header">{% trans "reticulocytes" %}</div>
      <div class="col-sm-1 header">{% trans "leucocytes" %}</div>
      <div class="col-sm-1 header">{% trans "myeloblasts" %}</div>
      <div class="col-sm-1 header">{% trans "promyelocytes" %}</div>
      <div class="col-sm-1 header">{% trans "myelocytes" %}</div>

    </div>
  </div>


  <div ng-repeat="item in episode.blood_count_follow_up | orderBy: '-followup_date' as followups">
    <div
      ng-show="$index === 0 || followups[$index-1].hospital !== item.hospital"
      class="row"
      >

    </div>
    <div class="row table-row" >
      <div class="col-sm-1 first-column text-right">
        [[ item.hospital | translate ]] [[ item.followup_date | displayDate ]]&nbsp; <i ng-click="episode.recordEditor.editItem('{{ models.BloodCountFollowUp.get_api_name }}', item)" class="fa fa-pencil edit pointer"></i>
      </div>
      <div class="col-sm-1 column">[[ item.erythrocytes ]]
      <div class="missing" ng-show="!item.erythrocytes">[[ "Fill me" | translate ]]</div>
      </div>
      
      <div class="col-sm-1 column">[[ item.hemoglobin ]]
        <div class="missing" ng-show="!item.hemoglobin">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.hematocrit ]]
        <div class="missing" ng-show="!item.hematocrit">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.mcv ]]
        <div class="missing" ng-show="!item.mcv">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.mch ]]
        <div class="missing" ng-show="!item.mch">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.mchc ]]
        <div class="missing" ng-show="!item.mchc">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.reticulocytes ]]
        <div class="missing" ng-show="!item.reticulocytes">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.leucocytes ]]
        <div class="missing" ng-show="!item.leucocytes">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.myeloblasts ]]
        <div class="missing" ng-show="!item.myeloblasts">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.promyelocytes ]]
        <div class="missing" ng-show="!item.promyelocytes">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.myelocytes ]]
        <div class="missing" ng-show="!item.myelocytes">[[ "Fill me" | translate ]]</div>
      </div>

    </div>
  </div>
</div>

<div class="follow-up-table" ng-show="episode.blood_count_follow_up.length > 0">
  <div class="col-md-12">
    <div class="row header-row display-label">
      
      <div class="col-sm-1 header"></div>
      <div class="col-sm-1 header">{% trans "eosinophils" %}</div>
      <div class="col-sm-1 header">{% trans "basophils" %}</div>
      <div class="col-sm-1 header">{% trans "lymphocytes" %}</div>
      <div class="col-sm-1 header">{% trans "monocytes" %}</div>
      <div class="col-sm-1 header">{% trans "plasmablasts" %}</div>
      <div class="col-sm-1 header">{% trans "plasmacytes" %}</div>
      <div class="col-sm-1 header">{% trans "platelets" %}</div>
      <div class="col-sm-1 header">{% trans "b2m" %}</div>
      <div class="col-sm-1 header">{% trans "albumin" %}</div>
      <div class="col-sm-1 header">{% trans "ldh" %}</div>
      <div class="col-sm-1 header">{% trans "esr" %}</div>


    </div>
  </div>


  <div ng-repeat="item in episode.blood_count_follow_up | orderBy: '-followup_date' as followups">
    <div
      ng-show="$index === 0 || followups[$index-1].hospital !== item.hospital"
      class="row"
      >

    </div>
    <div class="row table-row" >
      <div class="col-sm-1 first-column text-right">
        [[ item.hospital | translate ]] [[ item.followup_date | displayDate ]]&nbsp; <i ng-click="episode.recordEditor.editItem('{{ models.BloodCountFollowUp.get_api_name }}', item)" class="fa fa-pencil edit pointer"></i>
      </div>

      <div class="col-sm-1 column">[[ item.eosinophils ]]
        <div class="missing" ng-show="!item.eosinophils">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.basophils ]]
        <div class="missing" ng-show="!item.basophils">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.lymphocytes ]]
        <div class="missing" ng-show="!item.lymphocytes">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.monocytes ]]
        <div class="missing" ng-show="!item.monocytes">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.plasmablasts ]]
        <div class="missing" ng-show="!item.plasmablasts">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.plasmacytes ]]
        <div class="missing" ng-show="!item.plasmacytes">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.platelets ]]
        <div class="missing" ng-show="!item.platelets">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.b2m ]]
        <div class="missing" ng-show="!item.b2m">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.albumin ]]
        <div class="missing" ng-show="!item.albumin">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.ldh ]]
        <div class="missing" ng-show="!item.ldh">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.esr ]]
        <div class="missing" ng-show="!item.esr">[[ "Fill me" | translate ]]</div>
      </div>

    </div>
  </div>
</div>


<div class="follow-up-table" ng-show="episode.blood_count_follow_up.length > 0">
  <div class="col-md-12">
    <div class="row header-row display-label">
      
      <div class="col-sm-1 header"></div>
      <div class="col-sm-1 header">{% trans "young_cells" %}</div>
      <div class="col-sm-1 header">{% trans "band_neutrophils" %}</div>
      <div class="col-sm-1 header">{% trans "segmented_neutrophils" %}</div>



    </div>
  </div>


  <div ng-repeat="item in episode.blood_count_follow_up | orderBy: '-followup_date' as followups">
    <div
      ng-show="$index === 0 || followups[$index-1].hospital !== item.hospital"
      class="row"
      >

    </div>
    <div class="row table-row" >
      <div class="col-sm-1 first-column text-right">
        [[ item.hospital | translate ]] [[ item.followup_date | displayDate ]]&nbsp; <i ng-click="episode.recordEditor.editItem('{{ models.BloodCountFollowUp.get_api_name }}', item)" class="fa fa-pencil edit pointer"></i>
      </div>
      <div class="col-sm-1 column">[[ item.young_cells ]]
        <div class="missing" ng-show="!item.young_cells">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.band_neutrophils ]]
        <div class="missing" ng-show="!item.band_neutrophils">[[ "Fill me" | translate ]]</div>
      </div>
      <div class="col-sm-1 column">[[ item.segmented_neutrophils ]]
        <div class="missing" ng-show="!item.segmented_neutrophils">[[ "Fill me" | translate ]]</div>
      </div>


    </div>
  </div>
</div>