{% load i18n %}
<div class="row">
  <div class="col-md-11 col-md-offset-1">
    <div class="panel panel-default record-panel">
      <div class="panel-heading">
        <h3>
          {% trans "Lab Tests" %}
          <span class="pull-right pointer edit">
            <a
             ng-click="episode.recordEditor.newItem('{{ models.LabTest.get_api_name }}')"
            >
              <i class="fa fa-plus-circle edit pointer"></i>
            </a>
        </h3>
      </div>
      <table class="table  mm-table" ng-show="episode.lab_test.length > 0">
        <tr>
          <th></th>
          <th>{% trans "LDH" %}</th>
          <th>{% trans "Beta2m" %}</th>
          <th>{% trans "Albumin" %}</th>
          <th>{% trans "Calcium" %}</th>
          <th>{% trans "Creatinine" %}</th>
          <th>{% trans "M Protein Serum" %}</th>
          <th>{% trans "M Protein Urine" %}</th>
          <th>{% trans "M Protein in 24 hour Urine" %}</th>
          <th>{% trans "Heavy Chain Type" %}</th>
          <th>{% trans "Light Chain Type" %}</th>
          <th>{% trans "Light Chain Count" %}</th>
          <th>{% trans "Kappa Light Chain Count" %}</th>
          <th>{% trans "Kappa Lambda Ratio" %}</th>
          <th></th>
        </tr>
        <tr ng-repeat="item in episode.lab_test | orderBy: '-date' as lab_tests">
          <td class="first-column no-border">[[ item.hospital | translate ]] <br>[[ item.date | displayDate ]]</td>
          <td>[[ item.LDH ]]</td>
          <td>[[ item.beta2m ]]</td>
          <td>[[ item.albumin ]]</td>
          <td>[[ item.calcium ]]</td>
          <td>[[ item.creatinine ]]</td>
          <td>[[ item.mprotein_serum ]]</td>
          <td>[[ item.mprotein_urine ]]</td>
          <td>[[ item.mprotein_24h ]]</td>
          <td>
            <span ng-show="item.heavy_chain_type === 'Other'">
              <span ng-show="item.heavy_chain_type_other">
                [[ item.heavy_chain_type_other | translate ]]
              </span>
              <span ng-hide="item.heavy_chain_type_other">
                [[ item.heavy_chain_type_other | translate ]]
              </span>
            </span>
            <span ng-hide="item.heavy_chain_type === 'Other'">
              [[ item.heavy_chain_type ]]
            </span>
          </td>
          <td>[[ item.light_chain_type ]]</td>
          <td>[[ item.lambda_light_chain_count ]]</td>
          <td>[[ item.kappa_light_chain_count ]]</td>
          <td>[[ item.kappa_lambda_ratio ]]</td>
          <td class="no-border last-column">
            <i ng-click="episode.recordEditor.editItem('{{ models.LabTest.get_api_name }}', item)" class="fa fa-pencil edit pointer"></i>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
