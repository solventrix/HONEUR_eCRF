{% load forms %}
{% load custom_forms %}
{% load i18n %}
{% custom_datepicker field="MMDiagnosisDetails.diag_date" validator="diagnosis_date" date_after="the_episode.demographics[0].date_of_birth" date_after_message=_("Date of diagnosis must be after the patient's birth date") required=True %}

{% select field="MMDiagnosisDetails.heavy_chain_type" %}
{% select field="MMDiagnosisDetails.light_chain_type" %}

<div class="form-group" >
  <label for="" class="control-label col-sm-3">
    {% trans "History of SMM" %}
  </label>
  <div class="col-sm-3" ng-class="{'has-error': form.$submitted && form.mgus.$error.required}">
    <label class="radio-inline" ng-repeat='item in ["Yes", "No", "Unknown"]'>
      <input required type="radio" name="smm" value="[[ item]]" ng-change='editing.mm_diagnosis_details.smm_history_date = null' ng-model="editing.mm_diagnosis_details.smm_history"> [[ item | translate ]]
    </label>
    <div class="row" ng-show="form.$submitted && form.smm.$error.required" ng-class="{'has-error': form.$submitted && form.smm.$error.required}">
      <div class="col-md-12">
        <span class="help-block" >
          {% trans "History of SMM is required" %}
        </span>
      </div>
    </div>
  </div>
  <div ng-show="editing.mm_diagnosis_details.smm_history == 'Yes'" class="col-sm-4">
    {% custom_datepicker label=_("Date") field="MMDiagnosisDetails.smm_history_date" ngrequired="editing.mm_diagnosis_details.smm_history == 'Yes'" date_before="editing.mm_diagnosis_details.diag_date" date_before_message=_("Date must be before the date of diagnosis")  date_before_diff="0" %}
  </div>
</div>

{% radio field="MMDiagnosisDetails.iss_stage" %}
{% radio field="MMDiagnosisDetails.ds_stage" %}
{% radio field="MMDiagnosisDetails.del_17p" %}
{% radio field="MMDiagnosisDetails.del_13" %}
{% radio field="MMDiagnosisDetails.t4_14" %}
